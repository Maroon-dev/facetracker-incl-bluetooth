<!DOCTYPE html>
<html>
<head>
  <title>Gimbal Tracker - Universal</title>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_detection"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils"></script>
  <style>
    body { margin: 0; display: flex; flex-direction: column; align-items: center; background: #1a1a1a; color: white; font-family: sans-serif; }
    .controls { margin: 20px; padding: 15px; background: #333; border-radius: 8px; }
    button { padding: 15px 30px; font-size: 18px; cursor: pointer; background: #00ff00; border: none; border-radius: 5px; font-weight: bold; }
    #status { margin-top: 10px; color: #00ff00; text-align: center; }
  </style>
</head>
<body>

<div class="controls">
  <button id="connectBtn">ZOEK ROBOT</button>
  <div id="status">Status: Klik op zoek</div>
</div>

<script type="module">
  let bluetoothCharacteristic = null;
  const serviceUUID = "6e400001-b5a3-f393-e0a9-e50e24dcca9e";
  const charUUID    = "6e400002-b5a3-f393-e0a9-e50e24dcca9e";

  document.getElementById('connectBtn').addEventListener('click', async () => {
    try {
      // We zoeken op SERVICE UUID, niet op naam. Dit is veel robuuster.
      const device = await navigator.bluetooth.requestDevice({
        filters: [{ services: [serviceUUID] }] 
      });
      
      const server = await device.gatt.connect();
      const service = await server.getPrimaryService(serviceUUID);
      bluetoothCharacteristic = await service.getCharacteristic(charUUID);
      document.getElementById('status').innerText = "Status: VERBONDEN! âœ…";
    } catch (error) {
      document.getElementById('status').innerText = "Fout: " + error.message;
    }
  });

  // --- De rest van je MediaPipe/stuurData logica hieronder houden ---
  // (Zorg dat stuurData de 'writeValueWithoutResponse' gebruikt voor snelheid)
</script>
</body>
</html>
